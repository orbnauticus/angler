#!/usr/bin/env python3

from angler.core import Manifest, default_manifest
from angler.util import uri

from itertools import tee


if __name__ == '__main__':
    import argparse

    parser = argparse.ArgumentParser()

    parser.add_argument('uri', nargs='+', type=uri)

    parser.add_argument('--manifest', '-m', default=default_manifest)

    args = parser.parse_args()

    manifest = Manifest(args.manifest)

    sources, sinks = tee(args.uri)
    next(sinks, None)

    for source, sink in zip(sources, sinks):
        manifest.insert_edge(source, sink)
